import{k as G,a4 as le,i as e,c as t,S as T,d as v,a5 as y,a2 as W,N as Z,F as L,a1 as ae,aw as ne,p as J,P as se,b as h,D as R,a3 as K,v as re}from"./vendor-97ea48b2.js";import{u as j,a9 as ie,aa as V,ab as ce,B as E,ac as k,ad as oe,ae as de,af as ue,ag as ge,ah as he,ai as pe,aj as fe,ak as ve,al as be,am as me,b as _e,an as $e,ao as O,ap as z,aq as xe,ar as H,as as Ce,at as X,au as ke,av as ye,aw as Se,ax as we,ay as De,a8 as Ee,az as Te,aA as Ne,aB as Pe,aC as Ae}from"./index-900f431a.js";import{C as S}from"./ConfigTitle-72f50395.js";const Ie=v('<div class="flex flex-col p-4">'),Le=v('<div class="flex flex-col"><form class="flex gap-2 sm:flex-row"><input type=search name=name class="input input-bordered min-w-0 flex-1"placeholder=google.com><div class="flex items-center gap-2"><select name=type class="select select-bordered"><option>A</option><option>AAAA</option><option>MX'),Fe=v("<div class=py-2>"),Be=v('<form class="grid grid-cols-3 gap-2 sm:grid-cols-5">'),Re=v('<div class="grid grid-cols-2 gap-2 sm:grid-cols-4"><div class=form-control><label for=enable-tun-device class="label gap-2"><span class=label-text></span></label><input id=enable-tun-device type=checkbox class=toggle></div><div class=form-control><label for=tun-ip-stack class="label gap-2"><span class=label-text></span></label><select id=tun-ip-stack class="select select-bordered flex-1"><option>gVisor</option><option>System</option><option>LWIP</option></select></div><div class=form-control><label for=device-name class="label gap-2"><span class=label-text></span></label><input id=device-name class="input input-bordered min-w-0"></div><div class=form-control><label for=interface-name class="label gap-2"><span class=label-text></span></label><input id=interface-name class="input input-bordered min-w-0">'),je=v('<div class="flex flex-col gap-4"><select class="select select-bordered"><option></option><option></option><option></option></select><div class="grid grid-cols-2 gap-2 sm:grid-cols-3">'),Oe=v('<div class=form-control><label class=label><span class=label-text></span></label><input type=number class="input input-bordered">'),Qe=v('<div class="flex flex-col gap-2"><div class="flex flex-col"><select class="select select-bordered"></select></div><div class="flex flex-col"><select class="select select-bordered">'),Ve=v('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2"><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><input type=checkbox class=toggle></div></div><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><input type=checkbox class=toggle></div><div class="flex flex-col"><select class="select select-bordered">'),Q=v("<option>"),Ge=v('<span class="absolute -right-1 -top-1 flex h-3 w-3"><span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-info opacity-75"></span><span class="inline-flex h-3 w-3 rounded-full bg-info">'),Me=v('<div class="flex flex-col gap-2"><div class="grid grid-cols-2 gap-4"><kbd class=kbd></kbd><div class=relative><kbd class="kbd w-full"></kbd></div></div><h1 class="text-center text-lg font-bold">'),Ue=v('<div class="mx-auto flex max-w-screen-md flex-col gap-4">'),qe=y.object({name:y.string(),type:y.string()}),ze=()=>{const[r]=j(),l=ce(),{form:m,isSubmitting:n}=W({extend:K({schema:qe}),onSubmit:p=>l.get("dns/query",{searchParams:{name:p.name,type:p.type}}).json().then(({Answer:s})=>x((s==null?void 0:s.map(({data:i})=>i))||[])).catch(s=>re.error(s.message))}),[_,x]=G([]);return(()=>{const p=Le(),s=p.firstChild,i=s.firstChild,a=i.nextSibling;return a.firstChild,Z(m,s,()=>m),e(a,t(E,{type:"submit",class:"btn-primary",get loading(){return n()},get children(){return r("dnsQuery")}}),null),e(p,t(T,{get when(){return _().length>0},get children(){const $=Ie();return e($,t(L,{get each(){return _()},children:d=>(()=>{const g=Fe();return e(g,d),g})()})),$}}),null),p})()},He=y.object({port:y.number(),"socks-port":y.number(),"redir-port":y.number(),"tproxy-port":y.number(),"mixed-port":y.number()}),Xe=({backendVersion:r})=>{const[l]=j(),m=ae(),n=[{label:()=>l("port",{name:"HTTP"}),key:"port",onChange:a=>void k("port",Number(a.target.value),i)},{label:()=>l("port",{name:"Socks"}),key:"socks-port",onChange:a=>void k("socks-port",Number(a.target.value),i)},{label:()=>l("port",{name:"Redir"}),key:"redir-port",onChange:a=>void k("redir-port",Number(a.target.value),i)},{label:()=>l("port",{name:"TProxy"}),key:"tproxy-port",onChange:a=>void k("tproxy-port",Number(a.target.value),i)},{label:()=>l("port",{name:"Mixed"}),key:"mixed-port",onChange:a=>void k("mixed-port",Number(a.target.value),i)}],{form:_,setInitialValues:x,reset:p}=W({extend:K({schema:He})}),[s,{refetch:i}]=ne(Ae);return J(()=>{const a=s();a&&(x(a),p())}),(()=>{const a=je(),$=a.firstChild,d=$.firstChild,g=d.nextSibling,w=g.nextSibling,C=$.nextSibling;return $.addEventListener("change",u=>void k("mode",u.target.value,i)),e(d,()=>l("global")),e(g,()=>l("rule")),e(w,()=>l("direct")),e(a,t(T,{get when(){return!V(r())},get children(){return[(()=>{const u=Be();return Z(_,u,()=>_),e(u,t(L,{each:n,children:c=>(()=>{const f=Oe(),N=f.firstChild,F=N.firstChild,D=N.nextSibling;return e(F,()=>c.label()),se(D,"change",c.onChange),h(b=>{const B=c.key,P=c.key,A=c.key,I=c.label();return B!==b._v$&&R(N,"for",b._v$=B),P!==b._v$2&&R(D,"id",b._v$2=P),A!==b._v$3&&R(D,"name",b._v$3=A),I!==b._v$4&&R(D,"placeholder",b._v$4=I),b},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),f})()})),u})(),(()=>{const u=Re(),c=u.firstChild,f=c.firstChild,N=f.firstChild,F=f.nextSibling,D=c.nextSibling,b=D.firstChild,B=b.firstChild,P=b.nextSibling,A=D.nextSibling,I=A.firstChild,Y=I.firstChild,M=I.nextSibling,ee=A.nextSibling,U=ee.firstChild,te=U.firstChild,q=U.nextSibling;return e(N,()=>l("enableTunDevice")),F.addEventListener("change",o=>void k("tun",{enable:o.target.checked},i)),e(B,()=>l("tunModeStack")),P.addEventListener("change",o=>void k("tun",{stack:o.target.value},i)),e(Y,()=>l("tunDeviceName")),M.addEventListener("change",o=>void k("tun",{device:o.target.value},i)),e(te,()=>l("interfaceName")),q.addEventListener("change",o=>void k("interface-name",o.target.value,i)),h(()=>{var o;return F.checked=(o=s())==null?void 0:o.tun.enable}),h(()=>{var o;return P.value=(o=s())==null?void 0:o.tun.stack}),h(()=>{var o;return M.value=(o=s())==null?void 0:o.tun.device}),h(()=>{var o;return q.value=(o=s())==null?void 0:o["interface-name"]}),u})()]}}),C),e(C,t(E,{class:"btn-primary",get loading(){return oe()},onClick:de,get children(){return l("reloadConfig")}}),null),e(C,t(E,{class:"btn-secondary",get loading(){return ue()},onClick:ge,get children(){return l("updateGEODatabases")}}),null),e(C,t(E,{class:"btn-accent",get loading(){return he()},onClick:pe,get children(){return l("flushFakeIP")}}),null),e(C,t(T,{get when(){return!V(r())},get children(){return t(E,{class:"btn-error",get loading(){return fe()},onClick:ve,get children(){return l("upgradeCore")}})}}),null),e(C,t(E,{class:"btn-warning",get loading(){return be()},onClick:me,get children(){return l("restartCore")}}),null),e(C,t(E,{class:"btn-info",onClick:()=>{_e(""),m($e.Setup)},get children(){return l("switchEndpoint")}}),null),h(()=>{var u;return $.value=(u=s())==null?void 0:u.mode}),h(()=>d.value=O.Global),h(()=>g.value=O.Rule),h(()=>w.value=O.Direct),a})()},We=()=>{const[r]=j(),l=[{label:()=>r("en"),value:z.EN},{label:()=>r("zh"),value:z.ZH}];return(()=>{const m=Ve(),n=m.firstChild,_=n.firstChild,x=_.firstChild,p=n.nextSibling,s=p.firstChild,i=s.firstChild,a=s.nextSibling,$=a.firstChild;return e(_,t(S,{get children(){return r("autoSwitchTheme")}}),x),x.addEventListener("change",d=>xe(d.target.checked)),e(n,t(T,{get when(){return H()},get children(){const d=Qe(),g=d.firstChild,w=g.firstChild,C=g.nextSibling,u=C.firstChild;return e(g,t(S,{get children(){return r("favDayTheme")}}),w),w.addEventListener("change",c=>Ce(c.target.value)),e(w,t(L,{each:X,children:c=>(()=>{const f=Q();return f.value=c,e(f,c),f})()})),e(C,t(S,{get children(){return r("favNightTheme")}}),u),u.addEventListener("change",c=>ke(c.target.value)),e(u,t(L,{each:X,children:c=>(()=>{const f=Q();return f.value=c,e(f,c),f})()})),h(()=>w.value=ye()),h(()=>u.value=Se()),d}}),null),e(s,t(S,{get children(){return r("useTwemoji")}}),i),i.addEventListener("change",d=>we(d.target.checked)),e(a,t(S,{get children(){return r("switchLanguage")}}),$),$.addEventListener("change",d=>De(d.target.value)),e($,t(L,{each:l,children:d=>(()=>{const g=Q();return e(g,()=>d.label()),h(()=>g.selected=Ee()===d.value),h(()=>g.value=d.value),g})()})),h(()=>x.checked=H()),h(()=>i.checked=Te()),m})()},Ze=({backendVersion:r})=>{const[l,m]=G(!1);return J(async()=>{const n=r();n&&m(await Ne(n))}),(()=>{const n=Me(),_=n.firstChild,x=_.firstChild,p=x.nextSibling,s=p.firstChild,i=_.nextSibling;return e(x,()=>"1.124.3"),e(p,t(T,{get when(){return l()},get children(){return Ge()}}),s),e(s,r),e(i,()=>{var a;return(a=Pe())==null?void 0:a.url}),n})()},et=()=>{const[r]=j(),[l,m]=G("");return le(async()=>{m(await ie())}),(()=>{const n=Ue();return e(n,t(T,{get when(){return!V(l())},get children(){return[t(S,{withDivider:!0,get children(){return r("dnsQuery")}}),t(ze,{})]}}),null),e(n,t(S,{withDivider:!0,get children(){return r("coreConfig")}}),null),e(n,t(Xe,{backendVersion:l}),null),e(n,t(S,{withDivider:!0,get children(){return r("xdConfig")}}),null),e(n,t(We,{}),null),e(n,t(S,{withDivider:!0,get children(){return r("version")}}),null),e(n,t(Ze,{backendVersion:l}),null),n})()};export{et as default};
